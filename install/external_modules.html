<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>External modules &mdash; Materials Learning Algorithms (MALA)  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/mala_favicon.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Using MALA on HPC systems" href="on_cluster.html" />
    <link rel="prev" title="Installation of MALA" href="README.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/mala_horizontal_white.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../about.html">About</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../installation.html">Installation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="README.html">Installation of MALA</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">External modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#quantumespresso-total-energy-module">QuantumESPRESSO (total energy module)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lammps-descriptor-calculation">LAMMPS (descriptor calculation)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#installing-lammps">Installing LAMMPS</a></li>
<li class="toctree-l4"><a class="reference internal" href="#make-the-lammps-libray-visible">Make the LAMMPS libray visible</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="on_cluster.html">Using MALA on HPC systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="tested_systems.html">Successfully tested on</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/modules.html">API reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTE.html">Contributing to MALA</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Materials Learning Algorithms (MALA)</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../installation.html">Installation</a> &raquo;</li>
      <li>External modules</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com//mala-project/mala/blob/develop/docs/source/install/external_modules.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="external-modules">
<h1>External modules<a class="headerlink" href="#external-modules" title="Permalink to this headline"></a></h1>
<p>MALA can be coupled to external libraries for data pre- and postprocesing.
The DFT code QuantumESPRESSO is used for the calculation of the density
contributions to the total energy, while the LAMMPS code is used to calculate
SNAP descriptors on the real space grid of a simulation cell, either for
training or inference.</p>
<div class="section" id="quantumespresso-total-energy-module">
<h2>QuantumESPRESSO (total energy module)<a class="headerlink" href="#quantumespresso-total-energy-module" title="Permalink to this headline"></a></h2>
<p>The total energy module has been moved to its own fork of QE.
You can find it at
<a class="reference external" href="https://gitlab.com/casus/q-e/-/tree/tem_original_development">https://gitlab.com/casus/q-e/-/tree/tem_original_development</a> after
gaining access from the MALA development team. After checking out this
fork and branch, go to <code class="docutils literal notranslate"><span class="pre">total_energy_module/</span></code> amd follow the installation
instructions described therein.</p>
</div>
<div class="section" id="lammps-descriptor-calculation">
<h2>LAMMPS (descriptor calculation)<a class="headerlink" href="#lammps-descriptor-calculation" title="Permalink to this headline"></a></h2>
<div class="section" id="installing-lammps">
<h3>Installing LAMMPS<a class="headerlink" href="#installing-lammps" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>checkout <a class="reference external" href="https://github.com/athomps/lammps/tree/compute-grid-new">https://github.com/athomps/lammps/tree/compute-grid-new</a></p></li>
<li><p>Make sure the compute-grid tree is checked out!</p></li>
<li><dl class="simple">
<dt>Compile the LAMMPS shared library with the SNAP package installed</dt><dd><ul>
<li><p>cd into <code class="docutils literal notranslate"><span class="pre">/path/to/lammps/src</span></code> folder of LAMMPS</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">yes-ml-snap</span></code></p></li>
<li><p>(optional: check with <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">ps</span></code> that <code class="docutils literal notranslate"><span class="pre">ml-snap</span></code> was correctly added)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">mode=shlib</span> <span class="pre">mpi</span></code></p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="make-the-lammps-libray-visible">
<h3>Make the LAMMPS libray visible<a class="headerlink" href="#make-the-lammps-libray-visible" title="Permalink to this headline"></a></h3>
<div class="section" id="method-1-links-not-recommended">
<h4>Method 1 (links, not recommended)<a class="headerlink" href="#method-1-links-not-recommended" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p>Make the shared library visible e.g. <code class="docutils literal notranslate"><span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">$LAMMPS/src/liblammps.so</span> <span class="pre">/path/to/repo/src/datahandling</span></code></p></li>
<li><p>Make the LAMMPS <code class="docutils literal notranslate"><span class="pre">lammps.py</span></code> visible e.g. <code class="docutils literal notranslate"><span class="pre">ln</span> <span class="pre">-s</span> <span class="pre">$LAMMPS/python/lammps.py</span> <span class="pre">/path/to/repo/src/datahandling</span></code></p></li>
</ul>
</div>
<div class="section" id="method-2-package-recommended">
<h4>Method 2 (package, recommended)<a class="headerlink" href="#method-2-package-recommended" title="Permalink to this headline"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">python3</span> <span class="pre">install.py</span> <span class="pre">-p</span> <span class="pre">lammps</span> <span class="pre">-l</span> <span class="pre">../src/liblammps.so</span> <span class="pre">-v</span> <span class="pre">../src/version.h</span></code></p></li>
</ul>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="README.html" class="btn btn-neutral float-left" title="Installation of MALA" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="on_cluster.html" class="btn btn-neutral float-right" title="Using MALA on HPC systems" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021 National Technology &amp; Engineering Solutions of Sandia, LLC (NTESS). Under the terms of Contract DE-NA0003525 with NTESS, the U.S. Government retains certain rights in this software. Attila Cangi, J. Austin Ellis, Lenz Fiedler, Daniel Kotik, Normand Modine, Sivasankaran Rajamanickam, Steve Schmerler, Aidan Thompson.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>